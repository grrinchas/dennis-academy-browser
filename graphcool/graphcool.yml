
# In the types.graphql you define your data schema
types: ./types.graphql

functions:
    authenticate:
        type: resolver
        schema: ./src/authentication.graphql
        handler:
           code:
               src: ./src/resolvers/authenticate.js
               environment:
                   AUTH0_DOMAIN: nookit.eu.auth0.com
                   AUTH0_API_IDENTIFIER: dg-academy

permissions:
  - operation: User.read
    authenticated: true
    fields: [username, email, picture, id]
    query: ./src/permissions/User.graphql:isOwnerCreate

  - operation: Draft.create
    authenticated: true
    query: ./src/permissions/Draft.graphql:isOwnerCreate

  - operation: Draft.read
    authenticated: true
    query: ./src/permissions/Draft.graphql:isOwner

  - operation: Draft.update
    authenticated: true
    fields: [content, title]
    query: ./src/permissions/Draft.graphql:isOwner

  - operation: Draft.delete
    authenticated: true
    query: ./src/permissions/Draft.graphql:isOwner

  - operation: UserOnDraft.connect
    authenticated: true
    query: ./src/permissions/UserOnDraft.graphql:isOwner

  - operation: PublicDraft.create
    authenticated: true
    query: ./src/permissions/PublicDraft.graphql:isOwnerCreate

  - operation: PublicDraft.read
    authenticated: true

